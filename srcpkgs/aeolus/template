# Template file for 'aeolus'
pkgname=aeolus
version=0.9.9
revision=1
build_wrksrc="source"
build_style=gnu-makefile
make_build_args="LIBDIR=/usr/lib"
make_install_args="LIBDIR=/usr/lib"
make_use_env="false"
hostmakedepends="pkg-config"
makedepends="clthreads-devel zita-alsa-pcmi-devel alsa-lib-devel jack-devel clxclient-devel libX11-devel libXft-devel freetype-devel readline-devel"
short_desc="Pipe organ synthesizer"
maintainer="Morgan Thomas <m@m0rg.dev>"
license="GPL-3.0-or-later"
homepage="https://kokkinizita.linuxaudio.org/linuxaudio/aeolus/"
distfiles="https://kokkinizita.linuxaudio.org/linuxaudio/downloads/aeolus-${version}.tar.bz2
https://kokkinizita.linuxaudio.org/linuxaudio/downloads/stops-0.3.0.tar.bz2"
checksum="03b2fc4f40b9d76cf846dd6d75b0a99e70beb88a6ea724f61a89ede3cd90c113
 8f3cef486f0bd8dfe02cd12410685f286c6c1e5bd24fa1a8d9e343b0b0264d52"

post_install() {
	vmkdir /usr/share/Aeolus
	vcopy ../../stops-0.3.0 /usr/share/Aeolus/
	# some of these come out of the tarball as chmod 600...
	chmod 644 ${DESTDIR}/usr/share/Aeolus/stops-0.3.0/*.ae0
	# hacky edit to default to equal temperament
	sed -e 's/440.0 1/440.0 5/' -i ${DESTDIR}/usr/share/Aeolus/stops-0.3.0/Aeolus/definition

	vconf ${FILESDIR}/aeolus.conf
}
